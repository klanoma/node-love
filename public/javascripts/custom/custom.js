// Generated by CoffeeScript 1.4.0
(function() {
  var animation_delay, animation_speed, changePage;

  animation_speed = 400;

  animation_delay = 100;

  $(function() {
    $(".container").hide().delay(animation_delay).fadeIn(animation_speed);
    return $(document).on("click", ".primary-navigation li a, .logo a", function(e) {
      e.preventDefault();
      return changePage($(this).attr("href").replace(/^\/|\/$/g, ""));
    });
  });

  changePage = function(new_url) {
    if ($("body").attr("class") === new_url) {
      return;
    }
    $("#content-wrapper").stop(false, true).slideUp(animation_speed, function() {
      var page_slug;
      page_slug = (new_url === "" ? "index" : new_url);
      return $.get("/pages/" + page_slug, function(data) {
        History.pushState(page_slug, document.title.replace(/^(.*)\|.*$/, "$1 | ") + data.title, "/" + new_url);
        $("body").attr("class", new_url);
        return $("#content-wrapper").html(data.content).delay(animation_delay).slideDown(animation_speed);
      });
    });
    if (typeof _gaq !== "undefined") {
      return _gaq.push(["_trackPageview", new_url + "/"]);
    }
  };

}).call(this);
